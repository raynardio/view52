<div id="calendar"></div>

<% content_for :footer do %>
  <script>
    $(() => {
      const $calendar = $('#calendar');

      $calendar.fullCalendar({
        defaultView: '<%= @calendar[:view] %>',
        defaultDate: moment().set({
            year: <%= @calendar[:date].year %>,
            month: <%= @calendar[:date].month - 1 %>,
            date: <%= @calendar[:date].day %>
        }),
        header: {
          left: 'prev,next today',
          center: 'title',
          right: 'month,listWeek,listYear'
        },
        eventClick: function (e) {
          window.open(e.url, '_blank');
          return false;
        },
        events: <%= @calendar[:events].to_json.html_safe %>
      });
    });
  </script>
<% end %>
